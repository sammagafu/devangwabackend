import{L as J,P as O,r as i,N as Q,I as k,z as n,c as d,B as e,A as s,E as c,o as p,K as V,F as U,C as F,G as v,R as W,V as E}from"./index-DX0kaMnH.js";const X={class:"grid"},Y={class:"col-12"},ee={class:"card"},se=e("div",{class:"my-2"},[e("h4",{class:"text-2xl font-raleway font-bold text-devanga-primary"}," Manage Courses ")],-1),te={class:"flex justify-end"},oe={class:"flex flex-col"},le={class:"md:w-40 relative"},ae=["src","alt"],re={class:"flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6"},ie={class:"flex flex-row md:flex-col justify-between items-start gap-2"},ne={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},ce={class:"text-lg font-medium mt-2"},ue={class:"bg-surface-100 p-1",style:{"border-radius":"30px"}},de={class:"bg-surface-0 flex items-center gap-2 justify-center py-1 px-2",style:{"border-radius":"30px","box-shadow":`0px 1px 2px 0px rgba(0, 0, 0, 0.04),
                                0px 1px 2px 0px rgba(0, 0, 0, 0.06)`}},pe={class:"text-surface-900 font-medium text-sm"},ve=e("i",{class:"pi pi-star-fill text-yellow-500"},null,-1),fe={class:"flex flex-col md:items-end gap-8"},_e={class:"text-xl font-semibold"},me={class:"flex flex-row-reverse md:flex-row gap-2"},xe={class:"grid grid-cols-12 gap-4"},ge={class:"p-6 border border-surface-200 dark:border-surface-700 bg-surface-0 dark:bg-surface-900 rounded flex flex-col"},he={class:"bg-surface-50 flex justify-center rounded p-4"},ye={class:"relative mx-auto"},be=["src","alt"],Ce={class:"pt-6"},we={class:"flex flex-row justify-between items-start gap-2"},ke={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Ve={class:"text-lg font-medium mt-1"},Ee={class:"bg-surface-100 p-1",style:{"border-radius":"30px"}},De={class:"bg-surface-0 flex items-center gap-2 justify-center py-1 px-2",style:{"border-radius":"30px","box-shadow":`0px 1px 2px 0px rgba(0, 0, 0, 0.04),
                                0px 1px 2px 0px rgba(0, 0, 0, 0.06)`}},Se={class:"text-surface-900 font-medium text-sm"},Te=e("i",{class:"pi pi-star-fill text-yellow-500"},null,-1),Be={class:"flex flex-col gap-6 mt-6"},Ne={class:"text-2xl font-semibold"},Ie={class:"flex gap-2"},je={class:"field py-2"},Ue=e("label",{for:"coursename"},"Course Name",-1),Fe={key:0,class:"p-invalid"},qe={class:"field py-2"},Me=e("label",{for:"courseprice"},"Course Price in TZS",-1),Pe={key:0,class:"p-invalid"},Ze={class:"field py-2"},$e=e("label",{for:"courseimage"},"Course Image",-1),ze={key:0,class:"p-invalid"},Ae={class:"field py-2"},Le=e("label",{for:"coursedescription"},"Course Description",-1),Re={class:"mt-3"},Ge=e("div",{class:"confirmation-content"},[e("p",null,"Are you sure you want to delete this course?")],-1),Ke={class:"p-dialog-footer"},Oe={__name:"CreateCourse",setup(He){const h=J();O();const D=i([]),x=i(!1),y=i(!1),S=i({}),_=i(null),g=i(""),f=i(""),m=i(null),u=i(!1),C=i("grid"),q=i(["list","grid"]);Q(()=>{w()});const w=()=>{k.get("course/courses/").then(l=>{D.value=l.data}).catch(l=>{console.error("Error fetching courses:",l)})},M=()=>{if(u.value=!0,!f.value||!m.value||!g.value||!_.value)return;const l=new FormData;l.append("title",f.value),l.append("price",m.value.toFixed(2)),l.append("description",g.value),l.append("cover",_.value),k.post("course/",l,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{h.add({severity:"success",summary:"Successful",detail:"Course saved successfully",life:3e3}),w(),x.value=!1,T()}).catch(a=>{console.error("Error saving course:",a),h.add({severity:"error",summary:"Error",detail:"Error saving course",life:3e3})})},P=l=>{l.target.files.length>0&&(_.value=l.target.files[0],console.log(_.value))},T=()=>{f.value="",m.value=null,g.value="",_.value=null,u.value=!1},Z=()=>{S.value={},u.value=!1,x.value=!0},B=()=>{x.value=!1,y.value=!1,u.value=!1,T()},$=()=>{k.delete(`course/${S.value.id}`).then(l=>{h.add({severity:"success",summary:"Successful",detail:"Course Deleted",life:3e3}),w(),y.value=!1}).catch(l=>{console.error("Error deleting course:",l),h.add({severity:"error",summary:"Error",detail:"Error deleting course",life:3e3})})},z=()=>{};return(l,a)=>{const r=n("Button"),A=n("Toolbar"),L=n("SelectButton"),N=n("Tag"),I=n("router-link"),R=n("DataView"),G=n("InputText"),K=n("InputNumber"),H=n("Editor"),j=n("Dialog");return p(),d("div",X,[e("div",Y,[e("div",ee,[s(A,{class:"mb-4"},{start:c(()=>[se]),end:c(()=>[s(r,{label:"New",icon:"pi pi-plus",class:"mr-2",severity:"success",onClick:Z}),s(r,{label:"Export",icon:"pi pi-upload",severity:"help",onClick:z})]),_:1}),s(R,{value:D.value,layout:C.value},{header:c(()=>[e("div",te,[s(L,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=t=>C.value=t),options:q.value,allowEmpty:!1},{option:c(({option:t})=>[e("i",{class:V([t==="list"?"pi pi-bars":"pi pi-table"])},null,2)]),_:1},8,["modelValue","options"])])]),list:c(t=>[e("div",oe,[(p(!0),d(U,null,F(t.items,(o,b)=>(p(),d("div",{key:b},[e("div",{class:V(["flex flex-col sm:flex-row sm:items-center p-6 gap-4",{"border-t border-surface-200 dark:border-surface-700":b!==0}])},[e("div",le,[e("img",{class:"block xl:block mx-auto rounded w-full",src:o.cover,alt:o.title},null,8,ae),s(N,{value:o.inventoryStatus,class:"absolute dark:!bg-surface-900",style:{left:"4px",top:"4px"}},null,8,["value"])]),e("div",re,[e("div",ie,[e("div",null,[e("span",ne,v(o.category),1),e("div",ce,v(o.title),1)]),e("div",ue,[e("div",de,[e("span",pe,v(o.rating),1),ve])])]),e("div",fe,[e("span",_e,"$"+v(o.price),1),e("div",me,[s(I,{to:{name:"admin-course-detail",params:{slug:o.slug}}},{default:c(()=>[s(r,{icon:"pi pi-eye",severity:"info"})]),_:2},1032,["to"]),s(r,{icon:"pi pi-pencil"}),s(r,{icon:"pi pi-trash",severity:"danger"})])])])],2)]))),128))])]),grid:c(t=>[e("div",xe,[(p(!0),d(U,null,F(t.items,(o,b)=>(p(),d("div",{key:b,class:"col-span-12 sm:col-span-6 md:col-span-4 xl:col-span-4 p-2"},[e("div",ge,[e("div",he,[e("div",ye,[e("img",{class:"rounded w-full",src:o.cover,alt:o.title,style:{"max-width":"300px"}},null,8,be),s(N,{value:o.event_type,class:"absolute dark:!bg-surface-900",style:{left:"4px",top:"4px"}},null,8,["value"])])]),e("div",Ce,[e("div",we,[e("div",null,[e("span",ke,v(o.category),1),e("div",Ve,v(o.title),1)]),e("div",Ee,[e("div",De,[e("span",Se,v(o.rating),1),Te])])]),e("div",Be,[e("span",Ne,"$"+v(o.price),1),e("div",Ie,[s(I,{to:{name:"admin-course-detail",params:{slug:o.slug}}},{default:c(()=>[s(r,{icon:"pi pi-eye",severity:"info"})]),_:2},1032,["to"]),s(r,{icon:"pi pi-pencil "}),s(r,{icon:"pi pi-trash",severity:"danger"})])])])])]))),128))])]),_:1},8,["value","layout"]),s(j,{visible:x.value,"onUpdate:visible":a[4]||(a[4]=t=>x.value=t),style:{width:"650px"},header:"Create Course",modal:!0,class:"p-fluid"},{default:c(()=>[e("form",{onSubmit:W(M,["prevent"])},[e("div",je,[Ue,s(G,{id:"coursename",modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=t=>f.value=t),modelModifiers:{trim:!0},required:"",autofocus:"",class:V({"p-invalid":u.value&&!f.value}),placeholder:"Enter Course name",name:"coursename"},null,8,["modelValue","class"]),u.value&&!f.value?(p(),d("small",Fe,"Course name is required.")):E("",!0)]),e("div",qe,[Me,s(K,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=t=>m.value=t),inputId:"currency-us",mode:"currency",currency:"TZS",locale:"en-TZ",placeholder:"120,000"},null,8,["modelValue"]),u.value&&!m.value?(p(),d("small",Pe,"Course price is required.")):E("",!0)]),e("div",Ze,[$e,e("input",{type:"file",name:"cover",accept:"image/*",onChange:P,ref:"files"},null,544),u.value&&!_.value?(p(),d("small",ze,"Course image is required.")):E("",!0)]),e("div",Ae,[Le,s(H,{modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=t=>g.value=t),editorStyle:"height: 200px"},null,8,["modelValue"])]),e("div",Re,[s(r,{label:"Save the course",icon:"pi pi-check",type:"submit",class:"m-2"}),s(r,{label:"Cancel",icon:"pi pi-times",text:"",onClick:B,class:"m-2",severity:"contrast",outlined:""})])],32)]),_:1},8,["visible"]),s(j,{visible:y.value,"onUpdate:visible":a[5]||(a[5]=t=>y.value=t),style:{width:"450px"},header:"Confirm",modal:!0},{default:c(()=>[Ge,e("div",Ke,[s(r,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:B}),s(r,{label:"Delete",icon:"pi pi-trash",class:"p-button-danger",onClick:$})])]),_:1},8,["visible"])])])])}}};export{Oe as default};

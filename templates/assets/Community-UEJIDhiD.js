import{Y as E,r as d,z as k,o as n,c as i,B as e,A as f,G as r,Q as M,e as P,R as C,T as I,U as A,F as D,C as V,H as l,I as y,E as B,V as R,D as T}from"./index-DX0kaMnH.js";const H={class:"comment text-black rounded-md"},Z={class:"comment-header"},G={__name:"Comment",props:{comment:Object},emits:["add-reply"],setup(_,{emit:b}){d("");const m=o=>(o==null?void 0:o.split(" ").map(h=>h[0]).join(""))??"";return(o,h)=>{const p=k("Avatar");return n(),i("div",H,[e("div",Z,[f(p,{label:m(_.comment.author.full_name),class:"mr-2 text-white",size:"small",shape:"circle"},null,8,["label"]),e("span",null,r(_.comment.author.full_name),1)]),e("p",null,r(_.comment.content),1)])}}},W=E(G,[["__scopeId","data-v-0efb4e52"]]),Y={class:"xl:max-w-[1350px] lg:max-w-[960px] md:max-w-2xl sm:max-w-xl xl mx-auto px-3 font-raleway"},q={class:"container py-10 md:py-50px lg:py-60px 2xl:py-100px"},O={class:"grid grid-cols-1 lg:grid-cols-12 gap-12"},Q={class:"lg:col-start-1 lg:col-span-8 space-y-[35px]"},J={class:"py-4"},K={class:"w-full mb-4 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600"},X={class:"px-4 py-2 bg-gray-100 rounded-t-lg dark:bg-gray-800"},N=e("label",{for:"comment",class:"sr-only"},"Your comment",-1),ee={class:"flex items-center justify-between px-3 py-2 border-t dark:border-gray-600"},te=e("button",{type:"submit",class:"inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-blue-200 dark:focus:ring-blue-900 hover:bg-blue-800"}," Post ",-1),se={class:"flex ps-0 space-x-1 rtl:space-x-reverse sm:ps-2"},ae=e("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18"},[e("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})],-1),oe=e("span",{class:"sr-only"},"Upload image",-1),ne=[ae,oe],re=e("p",{class:"ms-auto text-xs text-gray-500 dark:text-gray-400"},[l("Remember, contributions to this topic should follow our "),e("a",{href:"#",class:"text-blue-600 dark:text-blue-500 hover:underline"},"Community Guidelines"),l(".")],-1),le={class:"flex flex-row justify-start items-center"},ie={class:"overflow-hidden relative py-2"},ce=["src"],de={class:"text-size-22 leading-6 font-semibold text-white px-15px py-5px md:px-6 md:py-2 bg-devanga-primary rounded text-center absolute top-5 right-5"},ue=e("br",null,null,-1),me={class:"text-black hover:text-devanga-primary p-4 break-words"},pe={class:"shadow-sm rounded-md px-4"},_e={class:"py-4"},he={class:"flex flex-wrap items-center gap-x-8"},ge={class:"text-devanga-primary cursor-pointer text-sm hover:text-devanga-primary dark:text-devanga-primary-dark dark:hover:text-devanga-primary"},xe=e("i",{class:"pi pi-comments"},null,-1),ve=["onClick"],ye={key:0},fe=e("i",{class:"pi pi-heart"},null,-1),be={key:1},ke=e("i",{class:"pi pi-heart text-red-500"},null,-1),we={key:0},Ce={class:"flex"},Ie=["onClick"],Ae={class:"comment-list"},De=e("div",{class:"lg:col-start-9 lg:col-span-4"},null,-1),Be={__name:"Community",setup(_){const b=M(),m=d([]),o=d({thread:"",content:""}),h=d(!0);d("");const p=()=>{y.get("community/threads/").then(t=>{m.value=t.data}).catch(t=>{console.log(t)})},g=d(null),x=d(""),F=()=>{const t=new FormData;t.append("content",x.value),g.value&&t.append("post",g.value),y.post("community/threads/",t,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{m.value.push(s.data),x.value="",g.value=null}).catch(s=>{console.error("Error saving post:",s)})},U=async t=>{o.value.thread=t,(await y.post("community/thread-replies/",o.value)).status==200,o.value.content="",p()},$=async t=>{(await y.post(`community/threads/${t}/like/`)).status==200,p()},j=t=>{const s=t.map(c=>c==null?void 0:c.user.id);return console.log("likers====>",s,b.user.id),s.includes(b.user.id)},z=t=>{const s=t.target.files[0];s&&(g.value=s)},L=()=>{document.getElementById("fileInput").click()};P(()=>{p()});function S(t){t||(t="U ?");const s=(t==null?void 0:t.split(" "))??[],c=s[0]?s[0].charAt(0):"",v=s[1]?s[1].charAt(0):"";return c+v}return(t,s)=>{const c=k("Avatar"),v=k("router-link");return n(),i("div",Y,[e("div",q,[e("div",O,[e("div",Q,[e("div",J,[e("form",{onSubmit:C(F,["prevent"])},[e("div",K,[e("div",X,[N,I(e("textarea",{id:"comment",rows:"4","onUpdate:modelValue":s[0]||(s[0]=a=>x.value=a),class:"w-full px-0 text-gray-900 bg-gray-100 border-gray no-focus",placeholder:"Write a comment...",required:""},null,512),[[A,x.value]])]),e("div",ee,[te,e("div",se,[e("input",{type:"file",id:"fileInput",ref:"fileInput",onChange:z,class:"hidden"},null,544),e("button",{type:"button",onClick:L,class:"inline-flex justify-center items-center p-2 text-gray-500 rounded cursor-pointer hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600"},ne)])])])],32),re]),(n(!0),i(D,null,V(m.value,a=>{var w;return n(),i("div",{class:"group",key:a.id},[e("div",le,[f(c,{label:S(a.starter.full_name),class:"mr-2",size:"large",shape:"circle"},null,8,["label"]),f(v,{class:""},{default:B(()=>[l(r(a.starter.full_name),1)]),_:2},1024)]),e("div",ie,[e("img",{src:a.post,alt:"",class:"w-full rounded"},null,8,ce),e("div",de,[e("h3",null,[l(r(new Date(a.created_at).getDate())+" ",1),ue,l(" "+r(new Date(a.created_at).toLocaleString("default",{month:"short"})),1)])])]),e("h3",me,[f(v,{to:{name:"community-details",params:{id:a.id}},class:"capitalize text-base"},{default:B(()=>[l(r(a.content),1)]),_:2},1032,["to"])]),e("div",pe,[e("div",_e,[e("ul",he,[e("li",null,[e("span",ge,[xe,l(" "+r((w=a.replies)==null?void 0:w.length)+" Comments ",1)])]),e("li",null,[e("span",{class:"text-devanga-primary cursor-pointer text-sm hover:text-devanga-primary dark:text-devanga-primary-dark dark:hover:text-devanga-primary",onClick:u=>$(a.slug)},[j(a==null?void 0:a.likes)?(n(),i("span",be,[ke,l(" "+r(a.likes_count)+" Likes ",1)])):(n(),i("span",ye,[fe,l(" "+r(a.likes_count)+" Likes ",1)]))],8,ve)])])]),h.value?(n(),i("div",we,[I(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=u=>o.value.content=u),rows:"5",cols:"64",placeholder:"Write a reply...",class:"bg-slate-200 text-black rounded-md"},null,512),[[A,o.value.content]]),e("div",Ce,[e("button",{onClick:C(u=>U(a.id),["prevent"]),class:"px-3 py-1 text-black border border-gray-400 rounded-md mt-2 mb-3"},"Reply",8,Ie)])])):R("",!0),e("div",Ae,[(n(!0),i(D,null,V(a.replies,u=>(n(),T(W,{key:u.id,comment:u},null,8,["comment"]))),128))])])])}),128))]),De])])])}}};export{Be as default};
